# ROSE Link DHCP/DNS Configuration
#
# This config handles DHCP for the hotspot and DNS forwarding.
# When AdGuard Home is installed, DNS is handled by AdGuard (port 53)
# and dnsmasq only provides DHCP services (port=0 is added below).

# Interface to listen on (AP interface)
# Will be replaced with detected interface during installation
interface=__WIFI_AP_INTERFACE__

# Listen on localhost so the Pi itself can use dnsmasq for DNS
# (when AdGuard is NOT installed)
listen-address=127.0.0.1
listen-address=192.168.50.1

# DHCP range for hotspot clients
dhcp-range=192.168.50.10,192.168.50.250,255.255.255.0,24h

# Gateway (this Raspberry Pi)
dhcp-option=3,192.168.50.1

# DNS servers for hotspot clients
# Points to 192.168.50.1 where AdGuard or dnsmasq listens
dhcp-option=6,192.168.50.1

# Domain
domain=roselink.local
local=/roselink.local/

# Resolve local hostname
address=/roselink.local/192.168.50.1

# Upstream DNS servers for forwarding queries
# These are used by dnsmasq to resolve external domains
# When AdGuard is installed, these are replaced with 127.0.0.1#5353
server=1.1.1.1
server=8.8.8.8
server=9.9.9.9

# No DHCP on WAN interfaces
no-dhcp-interface=eth0

# DHCP logging only (DNS queries logged by AdGuard if installed)
log-dhcp

# Bind only to specific interfaces
bind-interfaces
